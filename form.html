<!DOCTYPE html>
<html>
<style>
th, td {
	padding-right: 30px;
}
</style>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title>Fiber Laser Phased-Array Controller</title>
		
		<link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		
		<script type="text/javascript" src="/assets/jquery.js"></script>
	    <script src="assets/bootstrap/js/bootstrap.min.js"></script>

		
		<script>
		function hide19(){ // Used to hide 19 channel offsets when 7 channel is selected
			$("input[name='offset19']").hide();
			$("label[name='offset19']").hide();
		};
		
		function show19(){ // Used to hide 19 channel offsets when 7 channel is selected
			$("input[name='offset19']").show();
			$("label[name='offset19']").show();
		};
		
		function load_table(){
			var table;
			$.getJSON( "/saved_values/default7.json", function(result){
				$.each(result, function(i, field){
					table += "<tr><td>" + i + "</td><td>" + field + "</td></tr>";
				});
			});
			console.log(table);
			$("#7ChVal").html(table);
		};
		
		$(document).ready(function()
		{
			$("#load7").click(function(){
				$.getJSON( "/saved_values/default7.json", function(result){
					$.each(result, function(i, field){
						if(i == "pert"){
							document.getElementById("pert7").value = field;			
							document.getElementById("pertVal7").value = field;
						}
						else if(i == "leap"){
							document.getElementById("leap7").value = field;						
							document.getElementById("leapVal7").value = field;
						}
						else if(i == "round_trip"){
							document.getElementById("round_trip7").value = field;							
							document.getElementById("tripVal7").value = field;
						}
						else if(i == "offset7"){
							for(j = 0; j < 7; j++){
								var channel = j + 1;
								document.getElementById("offset7_" + channel).value = field[j];
							}
						}
					});
					console.log( "success" );
				})
				.done(function(){
					console.log( "done" );
				})
				.fail(function(){
					console.log( "error" );
				})
				.always(function(){
					console.log( "complete" );
				});
			});
			
			$("#load19").click(function(){
				$.getJSON( "/saved_values/default19.json", function(result){
					$.each(result, function(i, field){
						if(i == "pert"){
							console.log("hi");
							document.getElementById("pert19").value = field;			
							document.getElementById("pert19Val").value = field;
						}
						else if(i == "leap"){
							document.getElementById("leap19").value = field;						
							document.getElementById("leap19Val").value = field;
						}
						else if(i == "round_trip"){
							document.getElementById("round_trip19").value = field;							
							document.getElementById("trip19Val").value = field;
						}
						else if(i == "offset19"){
							for(j = 0; j < 19; j++){
								var channel = j + 1;
								document.getElementById("offset19_" + channel).value = field[j];
							}
						}
					});
					console.log( "success" );
				})
				.done(function(){
					console.log( "done" );
				})
				.fail(function(){
					console.log( "error" );
				})
				.always(function(){
					console.log( "complete" );
				});
			});
		});
		</script>
	</head>
    <body>

		<nav class="navbar navbar-light" style="background-color: #0404B4">
			<div class="navbar-header">
				<a class="navbar-brand" href="#"><font color="white">Fiber Laser Phased-Array Controller</font></a>
			</div>
			<ul class="nav nav-tabs">
				<li class="active"><a data-toggle="tab" href="#Home"><font color="white">Home</font></a></li>
				<li><a data-toggle="tab" href="#7"><font color="white">7 Channel Settings</font></a></li>
				<li><a data-toggle="tab" href="#19"><font color="white">19 Channel Settings</font></a></li>
			</ul>
		</nav>
		<div class="container-fluid">

			<div class="tab-content">
				<div id="Home" class="tab-pane fade in active">
					<p>Welcome to the Fiber Laser Phased-Array Controller</p>
				</div>
				<div id="7" class="tab-pane fade in">
				<form action="/" method="post">
				<fieldset>
					<table>
						<tr>
						<th>
						<label for="pert">Pert gain:</label>
						<input type="range" id="pert7" name="pert" min="0.001" value="0.03" max="1" step="0.001" oninput="pertVal.value = pert.value"/>
						(default value: 0.03; range: 0.001 - 1) 
						<input name="pertVal" type="number" min="0.001" value="0.03" max="1" id="pertVal7" readonly />
						</th>
						</tr>
				
						<tr>
						<th>
						<label for="leap">Leap gain:</label>
						<input type="range" id="leap7" name="leap7" min="1" value="1500" max="10000" step="1" oninput="leapVal.value = leap.value" />
						(default value: 1500; range: 1 - 10000)
						<input name="leapVal" type="number" min="1" value="1500" max="10000" id="leapVal7" readonly />
						</th>
						</tr>

						<tr>
						<th>
						<label for="round_trip">Round trip time:</label>
						<input type="range" id="round_trip7" name="round_trip" min="1e-8" value="1e-8" max="1e-7" step="1e-8" oninput="tripVal.value = round_trip.value"/>
						(default value: 10ns)
						<input name="tripVal" type="number" min="1e-8" value="1e-8" max="1e-7" id="tripVal7" readonly />
						</th>
						</tr>
					</table>
					<br />
						
					Channel offsets (default for all: 0): 
					<br />
					<table class="table table-striped">
						<tr>
						<th>
						<label for="ch1"> 1:</label>
						<input type="number" name="offset7" id="offset7_1" value="0" placeholder="Enter offset" />
						</th>
				
						<th>
						<label for="ch2"> 2:</label>
						<input type="number" name="offset7" id="offset7_2" value="0" placeholder="Enter offset" />
						</th>
				
						<th>
						<label for="ch3"> 3:</label>
						<input type="number" name="offset7" id="offset7_3" value="0" placeholder="Enter offset" />
						</th>
				
						<tr>
						<th>
						<label for="ch4"> 4:</label>
						<input type="number" name="offset7" id="offset7_4" value="0" placeholder="Enter offset" />
						</th>
				
						<th>
						<label for="ch5"> 5:</label>
						<input type="number" name="offset7" id="offset7_5" value="0" placeholder="Enter offset" />
						</th>
				
						<th>
						<label for="ch6"> 6:</label>
						<input type="number" name="offset7" id="offset7_6" value="0" placeholder="Enter offset" />
						</th>
						</tr>
				
						<tr>
						<th>
						<th>
						<label for="ch7"> 7:</label>
						<input type="number" name="offset7" id="offset7_7" value="0" placeholder="Enter offset" />
						</th>
						</th>
						<th>
						</th>
						</tr>
				
					</table>
								
					<button type="submit" class="btn btn-primary btn-lg" formaction="/run7" title="Runs the Fiber Laser Phased-Array Controller with 7 channels using the values above." >Run</button>
					<button type="submit" class="btn btn-primary btn-lg" formaction="/update7" title="Updates the Fiber Laser Phased-Array Controller values to those above (if it is already running).">Update</button>
					<button type="submit" class="btn btn-primary btn-lg" formaction="/reset7" title="Resets the Fiber Laser Phased-Array Controller (if it is already running).">Reset</button>
					<button type="submit" onclick="return confirm('Are you sure you wish to overwrite the saved 7-channel presets?')" class="btn btn-primary btn-lg save" id="save7" formaction="/save7" title="Saves the currently entered values to the system's 7-channel preset file. DOES NOT download file.">Save 7 Channel Value Set</button>
					<button type="button" onclick="" class="btn btn-primary btn-lg load" id="load7" formaction="/load7" title="Loads the values of the system's 7-channel preset file.">Load 7 Channel Presets</button>
				
				</fieldset>
				</form>
				</div>
				
				<div id="19" class="tab-pane fade in">
				<form action="/" method="post">
					<fieldset>
						<table>
							<tr>
							<th>
							<label for="pert7">Pert gain:</label>
							<input type="range" id="pert19" ="pert" min="0.001" value="0.03" max="1" step="0.001" oninput="pert19Val.value = pert19.value"/>
							(default value: 0.03; range: 0.001 - 1) 
							<input name="pertVal" type="number" min="0.001" value="0.03" max="1" id="pert19Val" readonly />
							</th>
							</tr>
						
							<tr>
							<th>
							<label for="leap19">Leap gain:</label>
							<input type="range" id="leap19" name="leap" min="1" value="1500" max="10000" step="1" oninput="leap19Val.value = leap19.value" />
							(default value: 1500; range: 1 - 10000)
							<input name="leapVal" type="number" min="1" value="1500" max="10000" id="leap19Val" readonly />
							</th>
							</tr>

							<tr>
							<th>
							<label for="round_trip19">Round trip time:</label>
							<input type="range" id="round_trip19" name="round_trip" min="1e-8" value="1e-8" max="1e-7" step="1e-8" oninput="trip19Val.value = round_trip19.value"/>
							(default value: 10ns)
							<input name="tripVal" type="number" min="1e-8" value="1e-8" max="1e-7" id="trip19Val" readonly />
							</th>
							</tr>
						</table>
						<br />
								
						Channel offsets (default for all: 0): 
						<br />
						<table class="table table-striped">
							<tr>
							
							<th><label for="ch1"> 1:</label>
							<input type="number" name="offset19" id="offset19_1" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label for="ch2"> 2:</label>
							<input type="number" name="offset19" id="offset19_2" value="0" placeholder="Enter offset" />
							</th>
						
							<th>
							<label for="ch3"> 3:</label>
							<input type="number" name="offset19" id="offset19_3" value="0" placeholder="Enter offset" />
							</th>
							
							<tr>
							<th>
							<label for="ch4"> 4:</label>
							<input type="number" name="offset19" id="offset19_4" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label for="ch5"> 5:</label>
							<input type="number" name="offset19" id="offset19_5" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label for="ch6"> 6:</label>
							<input type="number" name="offset19" id="offset19_6" value="0" placeholder="Enter offset" />
							</th>
							</tr>
							
							<tr>
							<th>
							<label for="ch7"> 7:</label>
							<input type="number" name="offset19" id="offset19_7" value="0" placeholder="Enter offset" />
							</th>
						
							<th>
							<label name="offset19" for="ch8"> 8:</label>
							<input type="number" name="offset19" id="offset19_8" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch9"> 9:</label>
							<input type="number" name="offset19" id="offset19_9" value="0" placeholder="Enter offset" />
							</th>
							</tr>
							
							<tr>
							<th>
							<label name="offset19" for="ch10">10:</label>
							<input type="number" name="offset19" id="offset19_10" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch11">11:</label>
							<input type="number" name="offset19" id="offset19_11" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch12">12:</label>
							<input type="number" name="offset19" id="offset19_12" value="0" placeholder="Enter offset" />
							</th>
							</tr>
							
							<tr>
							<th>
							<label name="offset19" for="ch13">13:</label>
							<input type="number" name="offset19" id="offset19_13" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch14">14:</label>
							<input type="number" name="offset19" id="offset19_14" value="0" placeholder="Enter offset" />
							</th>
						
							<th>
							<label name="offset19" for="ch15">15:</label>
							<input type="number" name="offset19" id="offset19_15" value="0" placeholder="Enter offset" />
							</th>
							</tr>
							
							<tr>
							<th>
							<label name="offset19" for="ch16">16:</label>
							<input type="number" name="offset19" id="offset19_16" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch17">17:</label>
							<input type="number" name="offset19" id="offset19_17" value="0" placeholder="Enter offset" />
							</th>
							
							<th>
							<label name="offset19" for="ch18">18:</label>
							<input type="number" name="offset19" id="offset19_18" value="0" placeholder="Enter offset" />
							</th>
							</tr>
							
							<tr>
							<th>
							<th>
							<label name="offset19" for="ch19">19:</label>
							<input type="number" name="offset19" id="offset19_19" value="0" placeholder="Enter offset" />
							</th>
							</th>
							<th>
							</th>
							</tr>
						</table>
														
						<button type="submit" class="btn btn-primary btn-lg" formaction="/run19" title="Runs the Fiber Laser Phased-Array Controller with 19 channels using the values above">Run</button>
						<button type="submit" class="btn btn-primary btn-lg" formaction="/update19" title="Updates the Fiber Laser Phased-Array Controller values to those above (if it is already running).">Update</button>
						<button type="submit" class="btn btn-primary btn-lg" formaction="/reset19" title="Resets the Fiber Laser Phased-Array Controller (if it is already running).">Reset</button>
						<button type="submit" onclick="return confirm('Are you sure you wish to overwrite the saved 19-channel presets?')" class="btn btn-primary btn-lg save" id="save19" formaction="/save19" title="Saves the currently entered values to the system's 19-channel preset file. DOES NOT download file.">Save 19 Channel Value Set</button>
						<button type="button" onclick="" class="btn btn-primary btn-lg load" id="load19" formaction="/load19" title="Loads the values of the system's 19-channel preset file.">Load 19 Channel Presets</button>
					</fieldset>
					</form>
				</div>
			</div>
		
		</div>
	</body>
</html>